name: autoperf
version: "0.1"
author: Gerd Zellweger <mail@gerdzellweger.com>
about: Uses less domain knowledge, but more time.
args:
    - verbose:
        short: v
        multiple: true
        help: Sets the level of verbosity
subcommands:
    - profile:
        settings:
            - TrailingVarArg
        about: Measure all available H/W events for a command using `perf stat`.
        args:
            - debug:
                short: d
                long: debug
                help: Print debug information verbosely.
            - output:
                short: o
                long: output
                help: Set output directory.
                value_name: DIRECTORY
                takes_value: true
#            - record:
#                short: r
#                long: record
#                help: Use `perf record` instead of `perf stat` (not recommended due to sampling rate differences).
#                takes_value: true
            - COMMAND:
                help: Command to execute.
                required: true
                multiple: true
    - pair:
        about: Pair two programs together and measure all hardware events.
        args:
            - debug:
                short: d
                long: debug
                help: Print verbose debug information.
            - output:
                short: o
                long: output
                help: Set output directory.
                value_name: DIRECTORY
                takes_value: true
    - extract:
        about: Merge counter measurements generated with the `profile` command in a single CSV file.
        args:
            - debug:
                short: d
                long: debug
                help: Print verbose debug information.
            - input:
                short: i
                long: input
                help: Set input directory.
                value_name: DIRECTORY
                takes_value: true
